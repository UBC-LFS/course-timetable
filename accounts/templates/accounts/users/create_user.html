{% extends 'timetable/base.html' %}

{% block content %}
<div class="container my-4">
  <form action="{% url 'accounts:create_user' %}" method="post" name="user-form" class="mx-auto" style="max-width: 800px;">
    {% csrf_token %}

    <div class="row g-3">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="first_name" class="form-label">First Name</label>
          <input id="first_name" name="first_name" type="text" maxlength="150" class="form-control" value="{% if user.first_name %}{{ user.first_name }}{% endif %}">
          <div class="form-text">Maximum length is 150 characters.</div>
        </div>

        <div class="mb-3">
          <label for="id_last_name_{{ user.id }}" class="form-label">Last Name</label>
          <input id="id_last_name_{{ user.id }}" name="last_name" type="text" maxlength="150" class="form-control" value="{% if user.last_name %}{{ user.last_name }}{% endif %}">
          <div class="form-text">Maximum length is 150 characters.</div>
        </div>

        <div class="mb-3">
          <label for="id_username_{{ user.id }}" class="form-label requiredField">CWL</label>
          <input id="id_username_{{ user.id }}" name="cwl" type="text" maxlength="150" class="form-control" value="{% if user.profile.cwl %}{{ user.profile.cwl }}{% endif %}">
          <input type="hidden" name="old_cwl" value="{% if user.profile.cwl %}{{ user.profile.cwl }}{% endif %}">
          <div class="form-text">Maximum length is 150 characters.</div>
        </div>

        <div class="mb-3">
          <label for="id_email_{{ user.id }}" class="form-label">Email</label>
          <input id="id_email_{{ user.id }}" name="email" type="email" maxlength="254" required class="form-control" value="{% if user.email %}{{ user.email }}{% endif %}">
          <div class="form-text">Maximum length is 254 characters.</div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="mb-3">
          <label for="id_supervisor_first_name_{{ user.id }}" class="form-label">Supervisor's First Name</label>
          <input id="id_supervisor_first_name_{{ user.id }}" name="supervisor_first_name" type="text" maxlength="150" class="form-control" value="{% if user.profile.supervisor_first_name %}{{ user.profile.supervisor_first_name }}{% endif %}">
          <div class="form-text">Maximum length is 150 characters. Optional for guest users.</div>
        </div>

        <div class="mb-3">
          <label for="id_supervisor_last_name_{{ user.id }}" class="form-label">Supervisor's Last Name</label>
          <input id="id_supervisor_last_name_{{ user.id }}" name="supervisor_last_name" type="text" maxlength="150" class="form-control" value="{% if user.profile.supervisor_last_name %}{{ user.profile.supervisor_last_name }}{% endif %}">
          <div class="form-text">Maximum length is 150 characters. Optional for guest users.</div>
        </div>

        <div class="mb-3">
          <label for="id_phone_{{ user.id }}" class="form-label">Phone</label>
          <input id="id_phone_{{ user.id }}" name="phone" type="text" maxlength="30" class="form-control" value="{% if user.profile.phone %}{{ user.profile.phone }}{% endif %}">
          <div class="form-text">Maximum length is 50 characters. Optional for guest users.</div>
        </div>

        <div class="form-check mb-3">
          <input type="checkbox" name="is_staff" class="form-check-input" id="id_is_staff_{{ user.id }}" {% if user.is_staff %}checked{% endif %}>
          <label class="form-check-label" for="id_is_staff_{{ user.id }}">LC Staff?</label>
          <div class="form-text">Designates whether the user can log into this admin site.</div>
        </div>

        <div class="form-check mb-3">
          <input type="checkbox" name="is_active" class="form-check-input" id="id_is_active_{{ user.id }}" {% if user.is_active %}checked{% endif %}>
          <label class="form-check-label" for="id_is_active_{{ user.id }}">Active?</label>
          <div class="form-text">Designates whether this user should be treated as active. Unselect this instead of deleting accounts.</div>
        </div>
      </div>
    </div>

    <input type="hidden" name="id" value="{{ user.id }}">
    <input type="hidden" name="next" value="{{ request.get_full_path }}">

    <div class="d-flex justify-content-center mt-4">
      <button type="submit" class="btn btn-success px-5">Create User</button>
    </div>
  </form>
</div>
{% endblock %}
