{% extends "timetable/base.html" %}
{% load static %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-3">Edit Program Requirements</h2>
  <p class="text-muted mb-4">
    Program: <strong>{{ program.name }}</strong> â€” Level: <strong>{{ level.name }}</strong>
  </p>

  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="program" value="{{ program.name }}">
    <input type="hidden" name="level" value="{{ level.id }}">

    <div class="table-wrapper table-responsive">
      <table class="table table-bordered table-striped table-hover align-middle">
        <thead>
          <tr>
            <th style="width:3rem;"></th>
            <th>Code</th><th>Number</th><th>Section</th><th>Year</th><th>Term</th>
          </tr>
        </thead>
        <tbody>
        {% for c in all_courses %}
          <tr>
            <td class="text-center">
              <input type="checkbox" name="course_ids" value="{{ c.id }}"
                     {% if c.id in current_ids %}checked{% endif %}>
            </td>
            <td>{{ c.code.name }}</td>
            <td>{{ c.number.name }}</td>
            <td>{{ c.section.name }}</td>
            <td>{{ c.academic_year.name }}</td>
            <td>{{ c.term.name }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex gap-2 justify-content-end mt-3">
      <a class="btn btn-outline-secondary"
         href="{% url 'scheduler:requirements' %}?program={{ program.name|urlencode }}&level={{ level.id }}&search=1">
        Cancel
      </a>
      <button type="submit" class="btn btn-primary">Save</button>
    </div>
  </form>
</div>
{% endblock %}
